---
import { SITE } from '~/utils/config';
import { calculateLaunchDate } from '~/utils/utils';

let launchDate = new Date(SITE.launchDate);
const { months, days, hours } = calculateLaunchDate(launchDate);
let launched = months == days && days == hours && hours == 0;
---

<div class="join bg-neutral-600 sm:h-[570px] h-[470px]">
  <div class="header-bg-pink"></div>
  <div class="header-bg-blue"></div>

  {
    launched && (
      <div class="container text-center sm:p-20 px-4 py-20 content">
        <div class="h2">Download Now</div>
        <div class="sm:mt-4 mt-2">
          <img src="/assets/images/line.png" alt="line" width={157} class="mx-auto" />
        </div>
        <div class="flex items-center gap-8 mt-8 justify-center flex-wrap">
          <div class="ios">
            <a href="https://apps.apple.com/us/app/senpai-dating-for-anime-fans/id6464066826">
              <img src="/assets/images/appstore.png" alt="appstore" />
            </a>
          </div>

          <div class="android">
            <a href="https://play.google.com/store/apps/details?id=makeshift.software.inc.senpai">
              <img src="/assets/images/playstore.png" alt="playstore" />
            </a>
          </div>
        </div>
      </div>
    )
  }
  {
    !launched && (
      <div class="container text-center sm:p-24 px-4 py-20 content">
        <div class="h2">Join the Waitlist</div>
        <div class="sm:mt-4 mt-2">
          <img src="/assets/images/line.png" alt="line" width={157} class="mx-auto" />
        </div>
        <form action="/" method="POST" class="mt-16 max-w-[528px] mx-auto flex flex-col">
          <input
            type="text"
            id="email"
            name="email"
            placeholder="Email address"
            class="text-input txt-input"
            required
          />
          <button class="action-btn btn-caption mt-6">Join the waitlist</button>
        </form>
      </div>
    )
  }
</div>

<style>
  .join {
    border-radius: 32px;
    position: relative;
    overflow: hidden;

    .header-bg-pink {
      width: 1136.422px;
      height: 951.387px;
      transform: rotate(-38.088deg);
      flex-shrink: 0;
      border-radius: 1136.422px;
      background: rgba(222, 11, 201, 0.3);
      filter: blur(110px);
      animation: bg-circle-pink 24s linear infinite;
      position: absolute;
      top: 400px;
      left: 400px;
    }

    .header-bg-blue {
      width: 1136.422px;
      height: 951.387px;
      transform: rotate(-38.088deg);
      flex-shrink: 0;
      border-radius: 1136.422px;
      background: rgba(18, 134, 240, 0.3);
      filter: blur(110px);
      animation: bg-circle-blue 24s linear infinite;
      position: absolute;
      top: 400px;
      left: 400px;
    }

    .join-bg {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 32px;
    }

    .content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      top: 0;
    }
  }
</style>
